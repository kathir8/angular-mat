<div [ngClass]="{'d-none': isWardUser }"  class="patregister">
  <form #PatientRegistrationForm="ngForm" id="patreg" autocomplete="off" class="m-2">
    <div class="col-12   fullHeight pt-1">
      <!--<div [ngClass]="{ '': valueType !== 'Set','col-md-3': valueType === 'Set','patNoneDisplay': valueType !== 'Set','patDisplay': valueType === 'Set'}" class="h-100">
          <patientSearch></patientSearch>
      </div>-->
      <div>
        <otheridentifier #OtherIdentifier [hidden]="true" [otherIdentifiersLists]="identifiersLists"
          (mngOtherIdentifierLists)="getOtherIdentifiersComponentLists($event)"
          (EnableParentSave)="EnableButtonOnDirty($event)" (OnIdentifierChecked)="onMainIdentifierCheck($event)">
        </otheridentifier>
      </div>
      <!--<div id="patientSearch" *ngIf="!patientService.showGrid" [ngClass]="{'col-md-12': valueType !== 'Set','col-md-9': valueType === 'Set'}" class="h-100 lbgWhite">-->
      <mat-tab-group [(selectedIndex)]="Index" id="patient-details-tabs">

        <mat-tab  [label]="PatientRegistaratinTitle"  *ngIf="!isAntibody" >
          <div class="row ps-1 padTop5">
            <div class="formDivider marginbottom">
              <strong class="formTitle px-2 colorHeader">{{"basicdetails" | translate}}</strong>
            </div>
            <div class="col-3  ">
              <mat-form-field class="w-100">
                <input matInput [placeholder]="'nhsnumber' | translate" id="patnhsnumber" name="txtNHSNumber"
                  maxlength="10" [(ngModel)]="ObjPatient.NHSNumber" maskSpecialCharacter maskNumber maskNHSNumber
                  [disabled]="(disablePRfield)||(isAmendPatient)" (blur)="ValidateNhsNo($event.target.value)" myAutofocus>
              </mat-form-field>
            </div>
            <div class="col-3">
              <div class="row">
                <div class="col pe-0">
                  <mat-form-field class="w-100">
                    <mat-label>{{'pasnumber' | translate }}</mat-label>
                    <input matInput id="patpasnumber" name="patPasNumber" required
                      (blur)="UpdateMainIdentifier()" [(ngModel)]="ObjPatient.PASNumber" maskSpecialCharacter
                      [disabled]="(disablePRfield)||(isAmendPatient)" [maxlength]="identifierLength">
                  </mat-form-field>
                </div>
                <div *ngIf="!isAmendPatient" class="col-2 p-0 other-identifier-container">
                  <i class="material-icons add-icon cursor " (click)="showidentifiers(OtherIdentifierMode.editable)">add</i>
                  <i class="fa fa-cog cogg-icon" [ngClass]="{
                      'cursor': identifiersLists.length === 0,
                      'opacity-50': identifiersLists.length > 0
                    }" [class.cursor]="identifiersLists.length === 0" [class.disabled]="identifiersLists.length > 0"
                    (click)="identifiersLists.length === 0 && onAutoGeneratePasNumber()">
                  </i>
<!-- 
                  <div class="mainLayerIdyTwo">
                    <span *ngIf="identifiersLists">
                      <i *ngIf="identifiersLists.length==0" class="icon-color fa fa-cog cogg cursor" aria-hidden="true"
                        (click)="onAutoGeneratePasNumber()"></i>
                      <i *ngIf="identifiersLists.length>0" class="icon-color fa fa-cog coggdisable lightOpacity"
                        aria-hidden="true"></i>
                    </span>
                  </div> -->
                </div>
              </div>
            </div>

            <div class="col-3  ">
              <!--<md-input-container class="md-autocomplete">
                <input mdInput [mdAutocomplete]="auto" [placeholder]="'registertitle' | translate" id="pattitle" name="drpPattitle" [(ngModel)]="ObjPatient.Title" [disabled]="disablePRfield" title="Select the Title" (change)="onTitleChange(ObjPatient.Title)">
              </md-input-container>
              <md-autocomplete #auto="mdAutocomplete" [displayWith]="displayFn">
                <md-option value=""></md-option>
                <md-option *ngFor="let Title of TitleList" [value]="Title.Expansion">{{Title.Expansion}}</md-option>
              </md-autocomplete>-->
              <!-- <md2-autocomplete [placeholder]="'registertitle' | translate" id="pattitle" [disabled]="disablePRfield"
                name="PatTitle" class="m-0 w-100" style="margin-top:15px;" [items]="TitleList" item-value="ID"
                item-text="displaytext" [(ngModel)]="ObjPatient.Title" (change)="onTitleChange(ObjPatient.Title)">
              </md2-autocomplete> -->


              <!-- <mat-form-field class="example-full-width">
                <input [placeholder]="'registertitle' | translate" id="pattitle" [disabled]="disablePRfield" name="PatTitle"
                  class="m-0 w-100" style="margin-top:15px;" [(ngModel)]="ObjPatient.Title" (change)="onTitleChange(ObjPatient.Title)"
                  [matAutocomplete]="auto">
                <mat-autocomplete #auto="matAutocomplete">
                  <mat-option value=""></mat-option>
                  <mat-option *ngFor="let Title of TitleList" [value]="Title.Expansion">{{Title.Expansion}}</mat-option>
                </mat-autocomplete>
              </mat-form-field> -->

              <mat-form-field class="w-100" >
                <!-- <input type="text" matInput [placeholder]="'registertitle'| translate" id="pattitle"  name="pattitle"
                   [(ngModel)]="ObjPatient.Title" [matAutocomplete]="auto"
                  (change)="onTitleChange(ObjPatient.Title.toString())"> -->
                  <mat-select [placeholder]="'registertitle'| translate"   id="pattitle"  name="pattitle"
                  [(ngModel)]="ObjPatient.Title" [displayWith]="TitleAutoDisplay.bind(this)"class="md-select-extension">
                  <mat-option value=""></mat-option>
                  <mat-option *ngFor="let TL of TitleList" [value]="+TL.ID"> {{TL.Expansion}}
                  </mat-option>
                </mat-select>
                <!-- <mat-autocomplete #auto="matAutocomplete" [displayWith]="TitleAutoDisplay.bind(this)">
                  <mat-option *ngFor="let TL of TitleList" [value]="TL.ID">
                    {{TL.Expansion}}
                  </mat-option>
                </mat-autocomplete> -->
              </mat-form-field>
            </div>
            <div class="col-3  ">
              <mat-form-field class="w-100">
                <input matInput [placeholder]="'givenname' | translate" id="patgivenname" required name="txtGivenName" maskCapitalize
                  (keypress)="MaskCharacters($event)" maxlength="35" [(ngModel)]="ObjPatient.GivenName" title="Enter the Given Name"
                  autocomplete="off" [disabled]="disablePRfield">
              </mat-form-field>
              <mat-hint class="mat-hint"><strong>{{"givennamehint" | translate}}</strong></mat-hint>
            </div>
          </div>
          <div class="row ps-1">
            <div class="col-3  ">
              <mat-form-field class="w-100">
                <input matInput [placeholder]="'middlenames' | translate" id="patmiddlenames" name="txtMiddleName"
                  maskCapitalize [(ngModel)]="ObjPatient.MiddleName" title="Enter the Middle Name" (keypress)="MaskCharacters($event)"
                  maxlength="35" autocomplete="off" [disabled]="disablePRfield">
              </mat-form-field>
            </div>
            <div class="col-3  ">
              <mat-form-field class="w-100">
                <input matInput [placeholder]="'familyname' | translate" id="patfamilyname" name="txtFamilyName"
                  required maskUpperCase [(ngModel)]="ObjPatient.FamilyName" title="Enter the Family Name"
                  (keypress)="MaskCharacters($event)" maxlength="35" autocomplete="off" [disabled]="disablePRfield">
              </mat-form-field>
              <mat-hint class="mat-hint"><strong>{{"familynamehint" | translate}}</strong></mat-hint>
            </div>
            <div class="col-2  " id="patGenDiv">
              <!-- <autocomplete
            [DisplayName]="'Expansion'" [Value]="'ID'" [(inputModel)]="ObjPatient.GenderID" [IMyAutoCompleteoptions]="genderOptions" *ngIf="GenderComboList" [Data]="GenderComboList"></autocomplete> -->
             <mat-form-field>
                <mat-select disableOptionCentering  [placeholder]="'gender' | translate" id="patgender"  name="drpGender"
                (ngModelChange)="onChangeGenderItem($event)" [(ngModel)]="ObjPatient.GenderID" [disabled]="disablePRfield" class="md-select-extension">
                  <mat-option value=""></mat-option>
                  <mat-option *ngFor="let gender of GenderComboList" [value]="gender.ID">{{gender.Expansion}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="col-2  " id="patSexDiv">
              <mat-form-field>
                <mat-select disableOptionCentering  [placeholder]="'sex' | translate" id="patsex" name="drpSex" required
                  [(ngModel)]="ObjPatient.SexID" (selectionChange)="disablePregant()" [disabled]="disablePRfield" class="md-select-extension ps-1">
                  <mat-option value=""></mat-option>
                  <mat-option *ngFor="let sex of SexComboList" [value]="sex.ID">{{sex.Expansion}}</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="col-2  " id="patCatDiv">
              <mat-form-field>
                <mat-select disableOptionCentering  [placeholder]="'patientcategory' | translate" id="patcat" name="txtOrdpatientcategory"
                (ngModelChange)="onChangePatientCategoryItem($event)"  [(ngModel)]="ObjPatient.PatientCategoryID" class="md-select-extension">
                  <mat-option *ngFor="let patcatList of patientCategoryList" [value]="patcatList.ID">
                    {{patcatList.Expansion}}</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
          <div class="row ps-1">
            <div class="col-3  ">
              <lims-virtual-ng-select  [DisplayColumns]="DisplayColumns" placeholder="{{'ethnicity' | translate}}" [Options]="EthnicityComboList"
              dispFld="Expansion" [(Transaction)]="ObjPatient.EthnicityID" valueFld="ID" (ngModelChangeEmit)="EthnicityChange($event)"></lims-virtual-ng-select>
              <!-- <mat-form-field class="w-100">
              
              <mat-select disableOptionCentering  [placeholder]="'ethnicity' | translate" id="patethnicity" name="drpEthnicity"
                  [(ngModel)]="ObjPatient.EthnicityID" [disabled]="disablePRfield" class="md-select-extension">
                  <mat-option value=""></mat-option>
                  <mat-option *ngFor="let ethnicity of EthnicityComboList" [value]="ethnicity.ID">
                    {{ethnicity.Expansion}}</mat-option>
                </mat-select>
              </mat-form-field> -->           
            </div>

            <div id="patRegdateofbirth" class="col-2  ">

              <customdatepicker [IsDisabled]="ObjPatient.UnknownDate"  [controlFormat]="'d'" [(inputModel)]="ObjPatient.DateOfBirth" [Externalparameter]="{Date:ObjPatient.DateOfBirth,Type:'dob',event:'ngChange'}"
                (LaunchExternalEvent)="LaunchExternalEvent($event)" 
                 [display]="'dateofbirth' | translate"  [IsCurrent]="false"  [maxDate]="currentDate" [isFullDateAllowed] = "true">
              </customdatepicker>

            </div>
            <div class="col-1 ipadAge">
              <mat-form-field class="w-100">
                <input matInput [placeholder]="'age' | translate" id="patage" name="txtAge" [(ngModel)]="ObjPatient.Age"
                  readonly [disabled]="disablePRfield">
              </mat-form-field>
            </div>
            <div class="col-2   margin-unknown-dob">

              <mat-checkbox class="ipadLeft" name="unknowndate" id="unknowndate" type="checkbox" [(ngModel)]="ObjPatient.UnknownDate" (change)="ClearDate()" >
                 <span style="font-size: 14px !important;">{{"unknowndate" | translate}}</span>
                </mat-checkbox>
              </div>
            <div id="patRegDateOfDeath" class="col-2   ipadDate">

              <customdatepicker [controlFormat]="'d'" [(inputModel)]="ObjPatient.DateOfDeath" [Externalparameter]="{Date:ObjPatient.DateOfDeath,Type:'dod',event:'ngChange'}"
                (LaunchExternalEvent)="LaunchExternalEvent($event)" [display]="'dateofdeath' | translate" [IsCurrent]="false" [maxDate]="DisableSince">
              </customdatepicker>

            </div>
            <div class="col-2   ipadDeath">
              <mat-form-field class="w-100">
                <input matInput [placeholder]="'ageatdeath' | translate" id="patageatdeath" name="txtAgeatDeath"
                  readonly [(ngModel)]="ObjPatient.AgeOfDeath" [disabled]="disablePRfield">
              </mat-form-field>
            </div>
          </div>
          <div class="row ps-1">
            <div class="col-2">
              <mat-form-field class="w-100" >
                <input matInput [placeholder]="'legacyid' | translate" id="legacysys" name="legacysys" [disabled]="true"
                [(ngModel)]="ObjPatient.LegacyPassNumber">
              </mat-form-field>
            </div>
            <div *ngIf="!isAmendPatient" class="col-1 row ps-1"  style="margin-top: 16px;margin-left: -10px;">
              <div   class="col-6"  (click)="CheckRightForLegacyField ? null : LegacyPatientSearch()" style="cursor: pointer;">
                <span matTooltip="{{'search'|translate}}" [ngClass]="{ 'disabledlegacy': CheckRightForLegacyField }"  [matTooltipPosition]="'below'" class="mdi mdi-magnify" style="font-size: 20px;"></span>
              </div>
              <div class="col-6" (click)="CheckRightForLegacyField ? null : clearlegacy()"  style="margin-left: -10px;cursor: pointer;">
                <span matTooltip="{{'btnClear'|translate}}" [ngClass]="{ 'disabledlegacy': CheckRightForLegacyField }"  [matTooltipPosition]="'below'" class="mdi mdi-close-thick" style="font-size: 20px;"></span>
              </div>
            </div>
            <div class="col-2">
              <mat-form-field class="w-100" >
                <input matInput [placeholder]="'legacysys' | translate" id="legacyid" name="legacyid" [disabled]="true"
                [(ngModel)]="ObjPatient.LegacyPassSystem">
              </mat-form-field>
            </div>
            <div class="col-2 ipadFlag">

              <!-- * Multiselect Dropdown -- Special intrest flag -->
              <lims-virtual-ng-multi-select [DisplayColumns]="MultiselectColumns"  [placeholder]="'specialinterestflag' | translate" [SelectedValuePath] = "'ID'" [ngMdlFld] = "'ObjectID'"
	            [Options]="splinterstList" dispFld="expansion" [(Transaction)]="ObjPatient.PatSpecInterestFlag" (ngModelChangeEmit) = "OnPatSpecInterestFlagChange($event)" [disable]="(disablePRfield)||(isAmendPatient)"></lims-virtual-ng-multi-select>
            </div>

            <div class="col-3">
              <mat-form-field class="w-100">
                <input matInput [placeholder]="'PatientLocation' | translate" id="PatCurrLoc" name="PatCurrLoc" class="m-0 w-100" [(ngModel)]="ObjPatient.CurrentLocation" [disabled]="true">
              </mat-form-field>
            </div>
            <!-- <div class="col-md-3">
              <mat-form-field class="w-100">
                <input matInput [placeholder]="'PatientLocation' | translate" id="PatCurrLoc" [matAutocomplete]="autoCurrLocation" name="PatCurrLoc" class="m-0 w-100" [(ngModel)]="ObjPatient.CurrentLocationID" [formControl]="LocationAutoComp" (ngModelChange)="onValueChanged(true)">
                <mat-autocomplete #autoCurrLocation="matAutocomplete" [displayWith]="LocationAutoDisplay.bind(this)">
                  <div class="row ps-1" style="padding: 5px;background-color: #e1e1e1;">
                    <div class="col-sm-6 col-md-6 col-lg-6" style="padding-left: 15px;font-weight: bold;" >{{"code"|translate}}</div>
                    <div class="col-sm-6 col-md-6 col-lg-6" style="font-weight: bold;">{{"expansion"|translate}}</div>
                  </div>
                  <mat-option *ngFor="let TL of filteredLocOptions| async" [value]="TL.ID" [matTooltip]="TL.Code+'-'+TL.Expansion" matTooltipClass="myTest-tooltip">
                    <div class="row ps-1">
                      <div class="col-sm-6 col-md-6 col-lg-6" >{{TL.Code}}</div>
                        <div class="col-sm-6 col-md-6 col-lg-6" >{{TL.Expansion}}</div>
                    </div>
                  </mat-option>
                </mat-autocomplete>
              </mat-form-field>
            </div> -->
            <div class="col-1" style="margin-top: 20px">
              <mat-checkbox [disabled]="ObjPatient.SexID != 2 || isAmendPatient"  [ngClass]="{'margleft30':isPoptupContext}" name="drpPregnant" id="pregnant" (change)="onPregnantSelect($event)" type="checkbox"  [(ngModel)]="ObjPatient.Pregnant">{{'pregnant' | translate}}</mat-checkbox>
            </div>

            <!--<div class="col-3   ">
                    <md-select [placeholder]="'registeredgp' | translate" id="patlastreqlocation" name="txtLastReqLocation" [(ngModel)]="ObjPatient.LastRequestLocation" readonly [disabled]="disablePRfield" class="md-select-extension">
                        <md-option value=""></md-option>
                        <md-option *ngFor="let LocId of LocationsList" [value]="LocId.ID">{{LocId.Expansion}}</md-option>
                    </md-select>
                </div>
                <div class="col-3   ">
                    <md-select [placeholder]="'Priority'" id="OrdDrop" name="drSex" [(ngModel)]="ObjPatient.PriorityId" class="md-select-extension">
                        <md-option value=""></md-option>
                        <md-option *ngFor="let pId of PriorityList" [value]="pId.ID">{{pId.Expansion}}</md-option>
                    </md-select>
            </div>-->
          </div>
          <div class="row ps-1">
            <div class="col-3">
              <mat-form-field class="w-100">
                <input matInput [placeholder]="'Weeksgestation' | translate"  type="text"  name="WeeksGestation"
                  [disabled]="!ObjPatient.Pregnant || isAmendPatient" maxlength="2" maskNumber  [(ngModel)]="ObjPatient.WeeksGestation" (keyup)="onKeyUp($event)">
              </mat-form-field>
            </div>
            <div class="col-3">
            <mat-form-field class="w-100">
              <input matInput  type="text"  name="WGRecordedDate" [disabled]="true" [ngModel]="ObjPatient.WGRecordedDate | gestationRecordedDate" (ngModelChange)="ObjPatient.WGRecordedDate=$event">
            </mat-form-field>
          </div>
            <div  class="col-3">
              <customdatepicker [minDate]="currentDate"  [(inputModel)]="ObjPatient.EDD" [Externalparameter]="{Type:'EDDSS',event:'ngChange'}"  [controlFormat]="'d'" (LaunchExternalEvent)="dateChange($event)"
              [display]="'edd' | translate" [IsCurrent]="false" [IsDisabled]="!ObjPatient.Pregnant || isAmendPatient">
             </customdatepicker>
            </div>
            <div class="col-3  ">
              <customdatepicker [(inputModel)]="ObjPatient.ActualDeliveryDate" [Externalparameter]="{Type:'ADDateSS',event:'ngChange'}"  [controlFormat]="'d'" (LaunchExternalEvent)="onADDSelect($event)"
              [display]="'ADD' | translate" [maxDate]="currentDate" [IsCurrent]="false" [IsDisabled]="ObjPatient.SexID != 2 || isAmendPatient">
             </customdatepicker>
            </div>

              <!-- * Singleselect Dropdown -- Procedure Worklist -->
					    <lims-virtual-ng-select  [DisplayColumns]="DisplayColumns" placeholder="{{'hazard' | translate}}"  [Options]="HazardComboList"
              dispFld="expansion" [(Transaction)]="ObjPatient.HazardID" valueFld = "ID" (ngModelChangeEmit)="HazardChange($event)"></lims-virtual-ng-select>
            </div>
          <div class="row ps-1">
            <div class="formDivider formDividerpatreg1">
              <strong class="formTitle px-2 colorHeader">{{"currentaddress1" | translate}}</strong>
            </div>
            <div class="col-3  ">
              <mat-form-field class="w-100">
                <input matInput [placeholder]="'addressline1' | translate" id="patpreviousaddressline1"
                  name="txtaddrline1" [(ngModel)]="ObjPatient.Address[0].Line1" maskAddressCharacter maxlength="50"
                  [disabled]="disablePRfield" data-toggle="tooltip" title="Line1"
                  style="text-overflow:ellipsis;white-space: nowrap;">
              </mat-form-field>
            </div>
            <div class="col-3  ">
              <mat-form-field class="w-100">
                <input matInput [placeholder]="'addressline2' | translate" id="patpreviousaddressline2"
                  name="txtaddrline2" [(ngModel)]="ObjPatient.Address[0].Line2" maskAddressCharacter maxlength="50"
                  [disabled]="disablePRfield" data-toggle="tooltip" title="Line2"
                  style="text-overflow:ellipsis;white-space: nowrap;">
              </mat-form-field>
            </div>
            <div class="col-3  ">
              <mat-form-field class="w-100">
                <input matInput [placeholder]="'town' | translate" id="patpreviousaddressline3" name="txtaddrline3"
                  [(ngModel)]="ObjPatient.Address[0].Line3" maskAddressCharacter maxlength="50" [disabled]="disablePRfield"
                  data-toggle="tooltip" title="Line3"
                  style="text-overflow:ellipsis;white-space: nowrap;">
              </mat-form-field>
            </div>
            <div class="col-3  ">
              <mat-form-field class="w-100">
                <input matInput [placeholder]="'county' | translate" id="patprevcity" name="txtcity"
                  [(ngModel)]="ObjPatient.Address[0].City" maskAddressCharacter maxlength="50" [disabled]="disablePRfield"
                  data-toggle="tooltip" title="Enter the City">
              </mat-form-field>
            </div>
          </div>
          <div class="row ps-1">
            <div *ngIf="CountryComboList" class="col-3  ">

              <!-- * Singleselect Dropdown -- Country -->
					    <lims-virtual-ng-select  [DisplayColumns]="DisplayColumns" placeholder="{{'country' | translate}}"  [Options]="CountryComboList" [showHeader]="false"
              dispFld="expansion" [(Transaction)]="ObjPatient.Address[0].Country" valueFld = "ID" (ngModelChangeEmit)="CountryChange($event)"></lims-virtual-ng-select>
            </div>
            <div class="col-3  ">
              <mat-form-field class="w-100">
                <input matInput [placeholder]="'postcode' | translate" id="patpreviouspostcode" name="txtpostcode"
                  [(ngModel)]="ObjPatient.Address[0].Postcode" maskSpecialCharacter maxlength="8"
                  [disabled]="disablePRfield" data-toggle="tooltip" title="Enter the Post Code">
              </mat-form-field>
            </div>
            <div class="col-3  ">
              <mat-form-field class="w-100">
                <input matInput [placeholder]="'email' | translate" id="patEmail" maxlength="50" name="patEmailAddress"
                  [(ngModel)]="ObjPatient.Email" maskEmail [disabled]="disablePRfield" data-toggle="tooltip"
                  title="{{ObjPatient.Email}}" style="text-overflow:ellipsis;white-space: nowrap;">
              </mat-form-field>
            </div>
            <div class="col-3  ">
              <mat-form-field class="w-100">
                <input matInput [placeholder]="'mobile' | translate" id="patMobile" maxlength="13"
                  [(ngModel)]="ObjPatient.Mobile" name="patworkmobile" maskSpecialCharacter maskNumber
                  maskTelephoneNumber (blur)="ValidateTelephoneNo()" title="Enter the person’s Mobile Number"
                  [disabled]="disablePRfield" (keypress)="event($event)">
              </mat-form-field>
              <mat-hint class="mat-hint"><strong>{{"mobilehint" | translate}}</strong></mat-hint>
            </div>
          </div>
          <div class="row ps-1">
            <div class="formDivider formDividerpatreg1">
              <strong class="formTitle px-2 colorHeader">{{"gp" | translate}}</strong>
            </div>
          </div>
          <div class="row ps-1">

            <div class="col-3  ">
              <div class="row ps-1">
                <lims-virtual-ng-select [DisplayColumns]="defaultlocationOptions"
                placeholder="{{'gpLocation' | translate}}" [Options]="objshowGPlocation"
                valueFld="ID" dispFld="Expansion" [disable]="disableAccess"
                [(Transaction)]="ObjPatient.RegisteredGPLocation" (ngModelChangeEmit)="onGPLocationChange()">
              </lims-virtual-ng-select>
            </div>
            </div>

            <div class="col-3 row ms-2">
              <div class="col-11">
                <lims-virtual-ng-select [DisplayColumns]="defaultlocationOptions"
                placeholder="{{'generalPract' | translate}}" [requiredField]="false" [Options]="objshowGPclinician"
                valueFld="ClinicianID" dispFld="Expansion" [disable]="disableAccess" [(Transaction)]="ObjPatient.RegisteredGPID"
                (ngModelChangeEmit)="onGPChange()">
              </lims-virtual-ng-select>
              </div>
  
            <div class="col-1">
              <span class="material-icons"
              [ngStyle]="{ 
                'color': GPLocationCheck ? '#0096bb' : '#434659'
              }" style="margin-top: 20px; cursor:pointer"
              matTooltip="{{'LocationClinitionfilter'| translate}}" (click)="toggleLocation(!GPLocationCheck)">location_on</span>
            </div>
              <!-- <mat-form-field class="w-100">
                <mat-select disableOptionCentering  [placeholder]="'registeredgp' | translate" id="OrdDrop" name="drSex"
                  (ngModelChange)="OnSelect($event)" [(ngModel)]="ObjPatient.RegisteredGPID"
                  class="md-select-extension">
                  <mat-option value=""></mat-option>
                  <mat-option *ngFor="let gp of generalPractitioner" [value]="gp.ClinicianID">{{gp.Expansion}}</mat-option>
                </mat-select>
              </mat-form-field> -->
            </div>
            <div class="col-3  ">
              <mat-form-field class="w-100">
                <input matInput [placeholder]="'phone' | translate" id="patregisteredgpphone"
                  name="drpRegisteredGPPhone"  [(ngModel)]="ObjPatient.RegisteredGPPhone"
                  [disabled]="true">
              </mat-form-field>
            </div>
            <div class="col-3  ">
              <mat-form-field class="w-100">
                <input matInput [placeholder]="'address' | translate" id="patregisteredgpaddress"
                  name="drpRegisteredGPAddress"  [(ngModel)]="ObjPatient.RegisteredGPAddress"
                  [disabled]="true">
              </mat-form-field>
            </div>
          </div>
          <div class="row ps-1">
            <div class="col-3  ">
              <mat-form-field class="w-100">
                <input matInput [placeholder]="'email' | translate" id="patregisteredgpemail" maxlength="50"
                  name="drpRegisteredGPEmail"  [(ngModel)]="ObjPatient.RegisteredGpEmail" maskEmail
                  [disabled]="true">
              </mat-form-field>
            </div>
          </div>
          <div *ngIf="isAmendPatient" class="col-12  ">
            <mat-form-field class="w-100">
              <textarea [(ngModel)]="AmendComments" required id='Comments' maxlength="250" matInput  [placeholder]="'reasonforchange' | translate"  name="comments" type="text"
                                                    rows="4" > </textarea>
            </mat-form-field>
          </div>


        </mat-tab>
        <mat-tab *ngIf="!isAmendPatient && !isAntibody" [label]="'additionaldetails' | translate">
          <div class="row ps-1">
            <div class="formDivider formDividerpatreg2">
              <strong class="formTitle colorHeader px-2">{{"personal" | translate}}</strong>
            </div>
          </div>

          <div class="row ps-1">

            <!--<div class="col-3  ">
              <mat-form-field class="w-100">
                <input matInput [placeholder]="'previousfamilyname' | translate" id="patprevfamilyname"
                  name="txtPrevFamilyName" maxlength="35" maskUpperCase [(ngModel)]="ObjPatient.MaidenName"
                  title="Enter the Previous Family Name" (keypress)="MaskCharacters($event)" autocomplete="off"
                  [disabled]="disablePRfield">
              </mat-form-field>
            </div>-->

            <div class="col-3  ">
              <mat-form-field class="w-100">
                <input matInput [placeholder]="'knownas' | translate" id="patknownas" maskCapitalize name="txtKnownAs"
                  maxlength="35" [(ngModel)]="ObjPatient.AliasName" title="Enter the Known As" autocomplete="off"
                  [disabled]="disablePRfield">
                <!--<md-hint class="mat-hint"><strong>e.g. Mr</strong></md-hint>-->
              </mat-form-field>
            </div>
            <div class="col-3  ">
              <mat-form-field class="w-100">
                <input matInput [placeholder]="'suffix' | translate" id="patsuffix" maskCapitalize name="txtSuffix"
                  maxlength="6" [(ngModel)]="ObjPatient.Suffix" title="Enter the Suffix" [disabled]="disablePRfield">
                <!--<md-hint class="mat-hint"><strong>e.g. Mr</strong></md-hint>-->
              </mat-form-field>
            </div>
            <div class="col-3  ">
              <mat-form-field class="w-100">
                <input matInput [placeholder]="'bloodgroup' | translate" id="patBloodGrp" maskCapitalize name="txtBloodGrp"
                  maxlength="20" [(ngModel)]="ObjPatient.ConfirmedBloodGroup" title="Enter the Blood group" [disabled]="true">
                <!--<md-hint class="mat-hint"><strong>e.g. Mr</strong></md-hint>-->
              </mat-form-field>
            </div>
            <div class="col-3" style="margin-top:-3px" *ngIf="!CPOrderEntry && !MBOrderEntry">
              <lims-virtual-ng-multi-select [DisplayColumns]="virtualDisplayColumns" [placeholder]="'diagnosis' | translate" [SelectedValuePath]="'ID'" [ngMdlFld]="'ObjectID'"
                [Options]="diagnosisgrouplist" dispFld="Expansion" [(Transaction)]="ObjPatient.ClinicalDiagnosisList" (ngModelChangeEmit)="DiagnosisChange($event)"></lims-virtual-ng-multi-select>
            </div>
           <!-- <div class="col-3  ">
              <mat-form-field class="w-100">
                <input matInput [placeholder]="'firstevername' | translate" id="patfirstevername" maskCapitalize name="txtfirstevername"
                  maxlength="35" [(ngModel)]="ObjPatient.FirstEverFamilyName" title="Enter the firstevername" [disabled]="disablePRfield">
                <md-hint class="mat-hint"><strong>e.g. Mr</strong></md-hint>
              </mat-form-field>
            </div>-->

          </div>

          <div class="row ps-1">
            <div class="formDivider formDividerpatreg2">
              <strong class="formTitle colorHeader px-2">{{"previousname" | translate}}</strong>
            </div>
          </div>

          <div class="row ps-1">

            <div class="col-3  ">
              <mat-form-field class="w-100">
                <input matInput [placeholder]="'givenname' | translate" id="patpregivenname" name="txtpregivenname" maxlength="35" [disabled]="true" maskUpperCase [(ngModel)]="ObjPatient.GivenName" />
              </mat-form-field>
            </div>
            <div class="col-3  ">
              <mat-form-field class="w-100">
                <input matInput [placeholder]="'middlenames' | translate" id="patpremiddlename"
                  name="txtpremiddlename" maxlength="35" [disabled]="true" maskUpperCase [(ngModel)]="ObjPatient.MiddleName"/>
              </mat-form-field>
            </div>
            <div class="col-3  ">
              <mat-form-field class="w-100">
                <input matInput [placeholder]="'surname' | translate" id="patprefamilyname"
                  name="txtprefamilyname" maxlength="35" [disabled]="true" maskUpperCase
                  [(ngModel)]="ObjPatient.FamilyName" />
              </mat-form-field>
            </div>
        </div>

        <div id="Griddata">
          <!-- <kendo-grid style="height:calc(100vh - 370px);display: flex; transform: rotateY(15px);" [data]="gridView"
        [resizable]="true" [selectable]="true" [pageSize]="state.take" [skip]="state.skip" [pageable]="true"
        (pageChange)="pageChange($event)" > -->

            <kendo-grid style="max-height:calc(100vh - 330px);display: flex; transform: rotateY(15px);"
            [data]="gridView" [resizable]="true" [selectable]="true" [pageSize]="state.take"
            [skip]="state.skip" [pageable]="true" (pageChange)="pageChange($event)"(dataStateChange)="dataStateChange($event)">

            <kendo-grid-column field="GivenName" title='{{"previousgivenname" | translate}}' [width]="40">
            </kendo-grid-column>
            <kendo-grid-column field="MiddleName" title='{{"previousmiddlename" | translate}}' [width]="40">
            </kendo-grid-column>
            <kendo-grid-column field="FamilyName" title='{{"previousfamilyname" | translate}}' [width]="40">
            </kendo-grid-column>
            <!-- <kendo-grid-column [width]="40" title='{{"nameatbirth" | translate}}' >
              <ng-template kendoGridCellTemplate let-dataItem let-idx="rowIndex">
                  <mat-checkbox style="margin-left: 6px;" name="checkboxname-{{idx}}" id="checkboxid-{{idx}}"  [(ngModel)]="dataItem.Nameatbirth" type="checkbox"
                  [checked]="dataItem.Nameatbirth" (change)="isNameatbirthSelected($event,rowIndex)"> </mat-checkbox>
                  [disabled]="dataItem.inActive"  (change)="gridCheckboxChange($event, dataItem)"
              </ng-template>
          </kendo-grid-column> -->

          <kendo-grid-column field="Nameatbirth" title='{{"nameatbirth" | translate}}' [width]="60">
            <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
              <mat-checkbox [checked]="dataItem.Nameatbirth" (change)="isNameatbirthSelected($event,rowIndex)" id="">
              </mat-checkbox>
            </ng-template>
          </kendo-grid-column>

          </kendo-grid>
        </div>

        <!-- <div class="row ps-1">
            <div class="formDivider formDividerpatreg2">
              <strong class="formTitle">{{"akanames" | translate}}</strong>
            </div>
          </div>
          <div class="row ps-1">
           <div class=" col-9 col-md-9 col-sm-9" style="width: 40%;" >
              <kendo-grid [data]="ObjPatient.AKAGivenName | isactive:ObjPatient.AKAGivenName" [resizable]="true"
                [selectable]="true" id= "akafam">
                <kendo-grid-column field="AkaGivenName" [width]="120" title='{{"akagivenname" | translate}}'>
                  <ng-template kendoGridCellTemplate let-objAkaName let-idx="rowIndex">
                    <input type="text" class="form-control" matInput
                      style="border-bottom: 1px solid teal; width:100%; border-bottom: 1px solid teal; width: 256px;"
                      [(ngModel)]="objAkaName.GivenName" name="akagname-{{idx}}" maxlength="35" maskCapitalize
                      (keypress)="MaskCharacters($event)" />
                  </ng-template>
                </kendo-grid-column>
                <kendo-grid-column field="delete" title='{{"delete" | translate}}' [width]="20">
                  <ng-template kendoGridCellTemplate let-objAkaName let-idx="rowIndex">
                    <div class="cursor" (click)="deleteAkaGiven(objAkaName, idx)">
                      <i style="color:black;padding-left: 15px;" class="material-icons cursor">delete</i>
                    </div>
                  </ng-template>
                </kendo-grid-column>
              </kendo-grid>
            </div>

            <div class=" col-9 col-md-9 col-sm-9" style="padding-left: 100px;width: 50%;">
              <kendo-grid [data]="ObjPatient.AKAFamilyName | isactive:ObjPatient.AKAFamilyName" [resizable]="true"
                [selectable]="true" id="akafam">
                <kendo-grid-column field="AkaFamilyName" [width]="120" title='{{"akafamilyname" | translate}}'>
                  <ng-template kendoGridCellTemplate let-objAkaName let-idx="rowIndex">
                    <input type="text" class="form-control" matInput
                      style="border-bottom: 1px solid teal; width:100%; border-bottom: 1px solid teal; width: 256px;"
                      [(ngModel)]="objAkaName.FamilyName" name="akafname-{{idx}}" maxlength="35" maskUpperCase
                      (keypress)="MaskCharacters($event)" />
                  </ng-template>
                </kendo-grid-column>
                <kendo-grid-column field="delete" title='{{"delete" | translate}}' [width]="20">
                  <ng-template kendoGridCellTemplate let-objAkaName let-idx="rowIndex">
                    <div class="cursor" (click)="deleteAkaFamily(objAkaName, idx)">
                      <i style="color:black;padding-left: 15px;" class="material-icons cursor">delete</i>
                    </div>
                  </ng-template>
                </kendo-grid-column>
              </kendo-grid>
            </div>
            </div>
            <div class="row ps-1">
              <div class="col-sm-9 col-md-9 col-9 float-end addrowTestDef" style=" margin-right: 30px; padding-top: 10px;">
                  <span style="cursor: pointer;">
                  <i  class="mdi mdi-table-row ps-1-plus-after" (click)="addAkafamily()" matTooltip="Add Row(s)" style="margin-right: 3px;font-size: 20px;"
                  data-toggle="tooltip" id="addNewRow" name="btnmsave"></i></span>
              </div>
              <div class="col-sm-9 col-md-9 col-9 float-end addrowTestDef" style=" padding-right: 505px; padding-top: 10px;">
                <span style="cursor: pointer;">
                  <i  class="mdi mdi-table-row ps-1-plus-after"  matTooltip="Add Row(s)" (click)="addAkaDetails()" style="margin-right: 3px;font-size: 20px;"
                  data-toggle="tooltip" id="addNewRow" name="btnmsave"></i></span>
              </div>
           </div> -->

          <div class="row ps-1">
            <div class="formDivider formDividerpatreg2">
              <strong class="formTitle colorHeader px-2">{{"contacts" | translate}}</strong>
            </div>
          </div>
          <div class="row ps-1">
            <div class="col-3  ">
              <mat-form-field class="w-100">
                <input matInput [placeholder]="'home' | translate" id="patHome" name="patHome"
                  [disabled]="disablePRfield" maxlength="13" [(ngModel)]="ObjPatient.Home" maskSpecialCharacter
                  maskNumber maskTelephoneNumber (keypress)="event($event)" (blur)="ValidateTelephoneNo()">
              </mat-form-field>
              <mat-hint><strong>{{"mobilehint" | translate}}</strong></mat-hint>
            </div>
            <div class="col-3  ">
              <mat-form-field class="w-100">
                <input matInput [placeholder]="'work' | translate" id="patWork" [disabled]="disablePRfield"
                  maxlength="13" [(ngModel)]="ObjPatient.WorkNumber" name="patworknumber" maskSpecialCharacter
                  maskNumber maskTelephoneNumber (keypress)="event($event)" (blur)="ValidateTelephoneNo()"
                  title="Enter the person's Work number. To include an extension number, enter the extension number into WorkExtn field">
              </mat-form-field>
              <mat-hint><strong>{{"mobilehint" | translate}}</strong></mat-hint>
            </div>
            <div class="col-3  ">
              <mat-form-field class="w-100">
                <input matInput [placeholder]="'WorkExtn' | translate" id="patWorkExtn" [disabled]="disablePRfield"
                  maxlength="4" [(ngModel)]="ObjPatient.WorkExtn" name="patWorkExtn" namemaskSpecialCharacter maskNumber
                  MobileNumberMask title="Enter the person’s Work Extension Number">
              </mat-form-field>
              <mat-hint><strong>{{"extnhint" | translate}}</strong></mat-hint>
            </div>
          </div>
          <div class="row ps-1">
            <div class="formDivider marginTop20px marginBottom10">
              <strong class="formTitle colorHeader px-2">{{"lastrequest" | translate}}</strong>
            </div>
          </div>
          <div class="row ps-1">
            <div class="col-3  ">
              <mat-form-field class="w-100">
                <input matInput [placeholder]="'lrn' | translate" id="patlastreqlrn" name="txtLastRequestLRN"
                  [(ngModel)]="ObjPatient.LastRequestLRN" readonly [disabled]="disablePRfield">
              </mat-form-field>
            </div>
            <div class="col-3  ">
              <mat-form-field class="w-100">
                <input matInput [placeholder]="'clinician' | translate" id="patlastreqclinician"
                  name="txtLastRequestClinician" [(ngModel)]="ObjPatient.LastRequestClinician" readonly
                  [disabled]="disablePRfield" title={{ObjPatient.LastRequestClinician}}>
              </mat-form-field>
            </div>
            <div class="col-3  ">
              <mat-form-field class="w-100">
                <input matInput [placeholder]="'location' | translate" id="patlastreqlocation" name="txtLastReqLocation"
                  [(ngModel)]="ObjPatient.LastRequestLocation" readonly [disabled]="disablePRfield">
              </mat-form-field>
            </div>
          </div>
        </mat-tab>
        <mat-tab [label]="'antibodies' | translate" *ngIf="!isAmendPatient && !CPOrderEntry && !MBOrderEntry">
          <antibodies [PatientIdentifiedAntibody]="ObjPatient.PatientIdentifiedAntibody" (getAntibody)="AntibodyValue($event)"></antibodies>

        </mat-tab>
        <mat-tab  [label]="'patientnote' | translate" *ngIf="!isAmendPatient && !isAntibody && hidetab">

          <patientnotepad [IsFromOrderEntry]="true" (DirtyCheck)="PatnotepadDirtyCheck($event)" (PatnoteObj)="AssignPatObj($event)" [PatNotes]="ObjPatient"></patientnotepad>



                <!-- <div class="row ps-1 pt-2" >
                         <div class="col-6 col-md-6 col-sm-6" *ngIf="patientflag">
                        <div class="formDivider">
                          <strong class="formTitle colorHeader">{{"patientflags" | translate}}</strong>
                        </div>
                        <div class="row ps-1 pt-2" id="PatFlgGrid">
                        <div class="col-12  ">
                          <kendo-grid
                          id="patflg"
                          #gridObj
                          [data]="ObjPatient.PatFlagsMapping"
                          [selectable]="true"
                          [resizable]="true">
                          <kendo-grid-column field="Expansion" title="{{'expansion'|translate}}" [width]="80">
                            <ng-template kendoGridCellTemplate let-PatFlgList let-idx="rowIndex">
                              <span style=" width:100%;" disabled >
                                 {{PatFlgList.Expansion}}</span>
                            </ng-template>
                          </kendo-grid-column>
                          <kendo-grid-column field="Active" title="{{'active'|translate}}" [width]="25">
                            <ng-template kendoGridCellTemplate let-PatFlgList>
                              <mat-checkbox style="margin-left: 20px" name="{{'active_'}}{{rowIndex}}" [checked]="PatFlgList.Active"
                              [disabled]="onCickPatientFlag(PatFlgList)"
                              (change)="PatFlgList.Active=$event.checked;EnableButtonOnDirty(true);" >
                              </mat-checkbox>
                            </ng-template>
                          </kendo-grid-column>
                        </kendo-grid>
                        </div>
                          </div>
                    </div>

                    <div class="col-6 col-md-6 col-sm-6" *ngIf="patientrequirements && !CPOrderEntry && !MBOrderEntry">
                         <div class="formDivider">
                          <strong class="formTitle colorHeader">{{"patientrequirements" | translate}}</strong>
                        </div>
                  <div class="row ps-1 pt-2" id="SplReqGrid">
                  <div class="col-12  ">
                    <kendo-grid
                    id="splreq"
                    #gridObj
                    [data]="ObjPatient.SpecialrequirementMapping"
                    [selectable]="true"
                    [resizable]="true">
                    <kendo-grid-column field="Expansion" title="{{'expansion'|translate}}" [width]="80">
                      <ng-template kendoGridCellTemplate let-SplReqList let-idx="rowIndex">
                        <span style=" width:100%;" disabled >
                           {{SplReqList.Expansion}}</span>
                      </ng-template>
                    </kendo-grid-column>
                    <kendo-grid-column field="Active" title="{{'active'|translate}}" [width]="20">
                      <ng-template kendoGridCellTemplate let-SplReqList >
                        <mat-checkbox  style="margin-left: 20px" name="{{'active_'}}{{rowIndex}}" [checked]="SplReqList.Active"
                        [disabled]="onClickSpeciRequirement(SplReqList)"
                        (change)="SplReqList.Active=$event.checked;EnableButtonOnDirty(true);"


                        >
                        </mat-checkbox>
                      </ng-template>
                    </kendo-grid-column>
                  </kendo-grid>
                  </div>
                    </div>
              </div>

                   <div class="col-2  ">
                    <label>{{"patientrequirements" | translate}}</label>
                    <div> -->
                      <!-- <ul
                        style="height:124px;overflow:hidden;width:165px;padding-left:0;padding-bottom:0;padding-right:0;"
                        class="pt-2">
                        <li *ngFor="let srl of SpecialrequirementList">
                          <mat-checkbox aria-label="specialrequirementcheckbox-{{srl.ID}}"
                            name="specialrequirementcheckbox-{{srl.ID}}" id="specialrequirementcheckbox-{{srl.ID}}"
                            type="checkbox" (change)="SpecialRequirementClick(srl.ID)" [checked]="srl.Active"
                            [disabled]="srl.Rights">
                            {{srl.Expansion}}
                          </mat-checkbox>
                        </li>
                      </ul> -->

                      <!--ChangedforDropdown-->
                      <!-- <mat-form-field class="w-100">
                        <mat-select disableOptionCentering  placeholder= "{{'splReq' | translate}}" (selectionChange)="SpecialRequirementClickNew(ObjPatient.SpecialrequirementDropdown)" id="SplReqDrop" name="drSplReq"
                           [(ngModel)]="ObjPatient.SpecialrequirementDropdown"
                          class="md-select-extension" multiple>
                          <mat-option *ngFor="let srl of SpecialrequirementList" [value]="srl.ID">
                            {{srl.Expansion}}</mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                  </div> -->
                  <!-- <div class="col-12  " style="padding-top: 20px;"   *ngIf="notepad">
                  <mat-tab-group (selectedTabChange)="onClickTab($event)" *ngIf="Index == 3 || (CPOrderEntry || MBOrderEntry)" [selectedIndex]="0" >
                    <mat-tab [label]="'generalnotes' | translate">

                    <div class="col-12  " *ngIf="notepad">
                      <div class="row ps-1">
                        <div class="col-md-4">
                          <mat-form-field class="w-100" style="padding-top:35px">
                            <textarea matInput [placeholder]="'freetextnote' | translate" id="patfreetextcomment" rows="1"
                              name="txtComments" [(ngModel)]="Comments" [disabled]="DisabledInput"></textarea>
                          </mat-form-field>
                        </div>
                        <div class="col-md-3">
                          <mat-form-field class="w-100" style="padding-top:35px">
                            <input matInput [placeholder]="'orderlrn' | translate" id="orderlrn"
                              name="orderlrn" [(ngModel)]="OrderLRN" [disabled]="DisabledInput">
                          </mat-form-field>
                        </div>
                              <div class="col-md-3">
                                <mat-form-field style="padding-top:35px" class="w-100">
                                  <mat-select required disableOptionCentering [(ngModel)]="Type"  [placeholder]="'Type' | translate"  name="type"  class="">
                                      <div *ngFor="let Type of NotepadType">
                                      <mat-option  [value]="Type.ID">
                                          {{Type.Expansion}}</mat-option>
                                      </div>
                                  </mat-select>
                              </mat-form-field>
                              </div>-->
                              <!-- <div class="col-md-4">
                                <div class="row ps-1 marginTop45px flex">
                                  <div>
                                  <button *ngIf="usercanadd" (click)="OnAddNotesClick('Generalnotes')" mat-raised-button id="Gadd" color="primary" matTooltip="{{'add/update'| translate}}" [matTooltipPosition]="'below'">
                                    {{"add/update" | translate}}
                                 </button>
                                 </div>
                                 <div>
                                 <button *ngIf="delete" (click)="OnClearNotesClick()"  mat-raised-button id="Gclear"  color="primary" matTooltip="{{'btnClear'| translate}}" [matTooltipPosition]="'below'">
                                   {{"btnClear" | translate}}
                                </button>
                                </div>
                                 <img *ngIf="usercanadd" (click)="OnAddNotesClick('Generalnotes')" class="cursor height-10px"
                                    matTooltip="{{'add/update'| translate}}" [matTooltipPosition]="'below'"
                                    src="./assets/img/Plus.png" />
                                  <img *ngIf="delete" (click)="OnClearNotesClick()" class="cursor height-10px paddingLeft20px"
                                     matTooltip="{{'btnClear'| translate}}" [matTooltipPosition]="'below'"
                                    src="./assets/img/Cancel.png" />-->
                                <!-- </div>
                              </div>
                            </div>
                            <div class="row ps-1 pt-2 " id="NotesGrid">
                              <kendo-grid id="patnotes" #gridObj [data]="PatnotesDataSource" [sort]="patnotestate.sort" [group]="patnotestate.group"
                              [groupable]="grouptype" [sortable]="true" [selectable]="true" [resizable]="true" (dataStateChange)="CheckStateChange($event)">
                                <kendo-grid-column field="Notes" title='{{"patnotes" | translate}}' [width]="180">
                                  <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                                    <span title='{{"patnotes"|translate}}'> {{"patnotes"|translate}}</span>
                                  </ng-template>
                                  <ng-template  kendoGridCellTemplate let-item>
                                    <span class="whitespace" title="{{item.Notes}}">{{item.Notes}}</span>
                                  </ng-template>
                                </kendo-grid-column>
                                <kendo-grid-column field="OrderLRN" title='{{"orderlrn" | translate}}' [width]="70">
                                  <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                                    <span title='{{"orderlrn"|translate}}'> {{"orderlrn"|translate}}</span>
                                  </ng-template>
                                  <ng-template  kendoGridCellTemplate let-item>
                                    <span class="whitespace" title="{{item.OrderLRN}}">{{item.OrderLRN}}</span>
                                  </ng-template>
                                </kendo-grid-column>
                                <kendo-grid-column field="Type" title='{{"Type" | translate}}' [width]="40">
                                  <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                                    <span title='{{"Type"|translate}}'> {{"Type"|translate}}</span>
                                  </ng-template>
                                  <ng-template kendoGridCellTemplate let-item>
                                    <span title="{{item.Type}}">{{item.PatientNotesTypeExpansion}}</span>
                                  </ng-template>
                                </kendo-grid-column>-->
                                <!-- <kendo-grid-column field="DateTimeString" title='{{"datetime" | translate}}' [width]="40">
                                  <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                                    <span title='{{"datetime"|translate}}'> {{"datetime"|translate}}</span>
                                  </ng-template>
                                  <ng-template kendoGridCellTemplate let-item>
                                    <span title="{{item.DateTimeString}}">{{item.DateTimeString}}</span>
                                  </ng-template>
                                </kendo-grid-column>
                                <kendo-grid-column field="UserName" title='{{"User" | translate}}' [width]="40">
                                  <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                                    <span title='{{"User"|translate}}'> {{"User"|translate}}</span>
                                  </ng-template>
                                  <ng-template kendoGridCellTemplate let-item>
                                    <span title="{{item.UserName}}">{{item.UserName}}</span>
                                  </ng-template>
                                </kendo-grid-column>
                                <kendo-grid-column *ngIf="candeletepatientnotes" [width]="30" field="Active"
                                  title='{{"active" | translate}}'>
                                  <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                                    <span title='{{"active"|translate}}'> {{"active"|translate}}</span>
                                  </ng-template>
                                  <ng-template kendoGridCellTemplate let-item style="text-align: center">
                                    <mat-checkbox style="margin-left: 20px" name="{{'active_'}}{{rowIndex}}" [checked]="item.Active"
                                      (change)="OnNotesChange($event, item)">
                                    </mat-checkbox>
                                  </ng-template>
                                </kendo-grid-column>


                              <kendo-grid-column field="Edit" title='{{"Edit" | translate}}' [width]="40">
                                <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                                  <span title='{{"Edit" | translate}}'>{{"Edit" | translate}}</span>
                                </ng-template>
                                <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex">
                                  <div (click)="!EditON && gridObjSelection(dataItem)">
                                    <span class="mdi mdi-pencil cursor"></span>
                                  </div>
                                </ng-template>
                              </kendo-grid-column>
                              </kendo-grid>
                            </div>
                          </div>
                        </mat-tab>
                    <mat-tab [label]="'specialnotes' | translate" *ngIf="!CPOrderEntry && !MBOrderEntry">

                    <div class="col-12  " *ngIf="notepad">
                      <div class="row ps-1">
                        <div class="col-md-4">
                          <mat-form-field class="w-100" style="padding-top:35px">
                            <textarea matInput [placeholder]="'freetextnote' | translate" id="patsplfreetextcomment" rows="1"
                              name="patsplfreetextcomment" [(ngModel)]="Comments" [disabled]="DisabledInput"></textarea>
                          </mat-form-field>
                        </div>
                        <div class="col-md-3">
                          <mat-form-field class="w-100" style="padding-top:35px">
                            <input matInput [placeholder]="'orderlrn' | translate" id="orderlrn"
                              name="orderlrn" [(ngModel)]="OrderLRN" [disabled]="DisabledInput">
                          </mat-form-field>
                        </div> -->
                        <!--<div class="col-md-3">
                          <mat-form-field style="padding-top:35px" class="w-100">
                            <mat-select required disableOptionCentering [(ngModel)]="Type"  [placeholder]="'Type' | translate"  name="type"  class="">
                                <div *ngFor="let Type of NotepadType">
                                <mat-option  [value]="Type.ID">
                                    {{Type.Expansion}}</mat-option>
                                </div>
                            </mat-select>
                        </mat-form-field>
                        </div>-->
                        <!-- <div class="col-md-4">
                          <div class="row ps-1 marginTop45px">
                            <div class="col-lg-3 col-md-6">
                            <button *ngIf="usercanadd" (click)="OnAddNotesClick('Specialrequirementnotes')" mat-raised-button id="Sadd" color="primary" matTooltip="{{'add/update'| translate}}" [matTooltipPosition]="'below'">
                               {{"add/update" | translate}}
                            </button>
                            </div>
                            <div class="col-lg-6 col-md-6 marginLeft50 ipadButton">
                            <button *ngIf="delete" (click)="OnClearNotesClick()" mat-raised-button id="Sclear" color="primary" matTooltip="{{'btnClear'| translate}}" [matTooltipPosition]="'below'">
                              {{"btnClear" | translate}}
                           </button>
                           </div> -->
                           <!--<img *ngIf="usercanadd" (click)="OnAddNotesClick('Specialrequirementnotes')" class="cursor height-10px"
                              matTooltip="{{'add/update'| translate}}" [matTooltipPosition]="'below'"
                              src="./assets/img/Plus.png" />
                            <img *ngIf="delete" (click)="OnClearNotesClick()" class="cursor height-10px paddingLeft20px"
                               matTooltip="{{'btnClear'| translate}}" [matTooltipPosition]="'below'"
                              src="./assets/img/Cancel.png" />-->
                          <!-- </div>
                        </div>
                      </div>
                      <div class="row ps-1 pt-2 " id="splNotesGrid">
                        <kendo-grid id="patnotes" #gridObj [data]="PatsplnotesDataSource" [pageable]="true" [sort]="splpatnotestate.sort" [group]="splpatnotestate.group"
                        [groupable]="true" [sortable]="true" [selectable]="true" [resizable]="true" (dataStateChange)="CheckSplStateChange($event)"
                          (selectionChange)="gridObjSelection(PatsplnotesDataSource,$event)">
                          <kendo-grid-column field="Notes" title='{{"specialnotes" | translate}}' [width]="190">
                            <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                              <span title='{{"specialnotes"|translate}}'> {{"specialnotes"|translate}}</span>
                            </ng-template>
                            <ng-template  kendoGridCellTemplate let-item>
                              <span class="whitespace" title="{{item.Notes}}">{{item.Notes}}</span>
                            </ng-template>
                          </kendo-grid-column>
                          <kendo-grid-column field="OrderLRN" title='{{"orderlrn" | translate}}' [width]="100">
                            <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                              <span title='{{"orderlrn"|translate}}'> {{"orderlrn"|translate}}</span>
                            </ng-template>
                            <ng-template  kendoGridCellTemplate let-item>
                              <span class="whitespace" title="{{item.OrderLRN}}">{{item.OrderLRN}}</span>
                            </ng-template>
                          </kendo-grid-column> -->
                          <!--<kendo-grid-column field="Type" title='{{"Type" | translate}}' [width]="40">
                            <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                              <span title='{{"Type"|translate}}'> {{"Type"|translate}}</span>
                            </ng-template>
                            <ng-template kendoGridCellTemplate let-item>
                              <span title="{{item.Type}}">{{item.PatientNotesTypeExpansion}}</span>
                            </ng-template>
                          </kendo-grid-column>-->
                          <!-- <kendo-grid-column field="DateTimeString" title='{{"datetime" | translate}}' [width]="40">
                            <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                              <span title='{{"datetime"|translate}}'> {{"datetime"|translate}}</span>
                            </ng-template>
                            <ng-template kendoGridCellTemplate let-item>
                              <span title="{{item.DateTimeString}}">{{item.DateTimeString}}</span>
                            </ng-template>
                          </kendo-grid-column>
                          <kendo-grid-column field="UserName" title='{{"User" | translate}}' [width]="40">
                            <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                              <span title='{{"User"|translate}}'> {{"User"|translate}}</span>
                            </ng-template>
                            <ng-template kendoGridCellTemplate let-item>
                              <span title="{{item.UserName}}">{{item.UserName}}</span>
                            </ng-template>
                          </kendo-grid-column>
                          <kendo-grid-column *ngIf="candeletepatientnotes" [width]="20" field="Active"
                            title='{{"active" | translate}}'>
                            <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
                              <span title='{{"active"|translate}}'> {{"active"|translate}}</span>
                            </ng-template>
                            <ng-template kendoGridCellTemplate let-item style="text-align: center">
                              <mat-checkbox style="margin-left: 20px" name="{{'active_'}}{{rowIndex}}" [checked]="item.Active"
                                (change)="OnNotesChange($event, item)">
                              </mat-checkbox>
                            </ng-template>
                          </kendo-grid-column>
                        </kendo-grid>
                      </div>
                    </div>
                    </mat-tab>
                  </mat-tab-group>
                  </div>
                  </div>   -->
        </mat-tab>
      </mat-tab-group>
      <div class="resultspace" *ngIf="!isAmendPatient"></div>
    </div>
  </form>
</div>

  <div [ngClass]="{'d-none': !isWardUser }" class="center">
  <i style="font-size:20px;" class="mdi mdi-clipboard-text-multiple-outline"></i>
  <div style="text-align: center; color:#545454;" >{{"patientlistloadshere"|translate}}...</div>
</div>

<!-- <ConfirmDialog [sDialogMessage]="sdialogmessage" (save)="DialogOutput($event)" (cancel)="DialogOutput($event)"></ConfirmDialog> -->
